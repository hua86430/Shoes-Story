(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e1d3e41c"],{"395d":function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),o=Object(a["createVNode"])("h1",{class:"mt-3 mb-3"},"購物車",-1),r={class:"container"},l={class:"row"},n={class:"col"},d={class:"text-end"},s={class:"table align-middle"},i=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th"),Object(a["createVNode"])("th",null,"品名"),Object(a["createVNode"])("th",{width:"15%"}),Object(a["createVNode"])("th",{width:"15%"}),Object(a["createVNode"])("th",{width:"10%"},"單價"),Object(a["createVNode"])("th",{width:"10%"},"總金額")])],-1),u={class:"align-middle"},b=Object(a["createVNode"])("i",{class:"bi bi-trash-fill"},null,-1),m=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-primary"}," 前往商品頁面 ",-1),j=Object(a["createVNode"])("td",null,null,-1),O=Object(a["createVNode"])("td",null,null,-1),h=Object(a["createVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),p={class:"my-5 row justify-content-center"},V={class:"mb-3"},f=Object(a["createVNode"])("label",{for:"email",class:"form-label"},"Email",-1),N={class:"mb-3"},g=Object(a["createVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),v={class:"mb-3"},k=Object(a["createVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),y={class:"mb-3"},C=Object(a["createVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),w={class:"mb-3"},x=Object(a["createVNode"])("label",{for:"message",class:"form-label"},"留言",-1),S=Object(a["createVNode"])("div",{class:"text-end"},[Object(a["createVNode"])("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function $(e,t,c,$,B,U){var D=Object(a["resolveComponent"])("router-link"),z=Object(a["resolveComponent"])("Field"),I=Object(a["resolveComponent"])("error-message"),M=Object(a["resolveComponent"])("Form"),q=Object(a["resolveComponent"])("CartItemCheck");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[o,Object(a["createVNode"])("div",r,[Object(a["createVNode"])("div",l,[Object(a["createVNode"])("div",n,[Object(a["createVNode"])("div",d,[Object(a["createVNode"])("button",{class:"btn btn-outline-danger",type:"button",onClick:t[1]||(t[1]=function(){return U.deleteAll&&U.deleteAll.apply(U,arguments)})}," 清空購物車 ")]),Object(a["createVNode"])("table",s,[i,Object(a["createVNode"])("tbody",u,[B.carts?(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],{key:0},Object(a["renderList"])(B.carts.carts,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id},[Object(a["createVNode"])("td",null,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:function(t){return U.deleteItem(e.id)},disabled:B.loadingStatus.loadingItem===e.id},[b],8,["onClick","disabled"])]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.product.title),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])(D,{to:"/product/".concat(e.product_id)},{default:Object(a["withCtx"])((function(){return[m]})),_:2},1032,["to"])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-info",onClick:function(t){return U.cartCheck(e)}}," 查看選擇尺寸 ",8,["onClick"])]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.product.price.toLocaleString()),1),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])((e.product.price*e.qty).toLocaleString()),1)])})),128)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("tfoot",null,[Object(a["createVNode"])("tr",null,[j,O,h,Object(a["createVNode"])("td",null,"NTD. "+Object(a["toDisplayString"])(B.carts.total),1)])])])]),Object(a["createVNode"])("div",p,[Object(a["createVNode"])(M,{ref:"form",class:"col-md-6",onSubmit:U.onSubmit},{default:Object(a["withCtx"])((function(e){var c=e.errors;return[Object(a["createVNode"])("div",V,[f,Object(a["createVNode"])(z,{id:"email",name:"信箱",type:"email",rules:"email|required",class:["form-control",{"is-invalid":c["信箱"]}],placeholder:"請輸入 Email",modelValue:B.order.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return B.order.user.email=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(I,{name:"信箱",class:"invalid-feedback"})]),Object(a["createVNode"])("div",N,[g,Object(a["createVNode"])(z,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":c["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:B.order.user.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return B.order.user.name=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(I,{name:"姓名",class:"invalid-feedback"})]),Object(a["createVNode"])("div",v,[k,Object(a["createVNode"])(z,{id:"tel",name:"電話",type:"number",rules:U.isPhone,class:["form-control",{"is-invalid":c["電話"]}],placeholder:"請輸入電話",modelValue:B.order.user.tel,"onUpdate:modelValue":t[4]||(t[4]=function(e){return B.order.user.tel=e})},null,8,["rules","class","modelValue"]),Object(a["createVNode"])(I,{name:"電話",class:"invalid-feedback"})]),Object(a["createVNode"])("div",y,[C,Object(a["createVNode"])(z,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":c["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:B.order.user.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return B.order.user.address=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(I,{name:"地址",class:"invalid-feedback"})]),Object(a["createVNode"])("div",w,[x,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[6]||(t[6]=function(e){return B.order.message=e})},null,512),[[a["vModelText"],B.order.message]])]),S]})),_:1},8,["onSubmit"])])])]),Object(a["createVNode"])(q,{onCartCheckModal:U.getCart,ref:"cartCheck"},null,8,["onCartCheckModal"])],64)}c("99af");var B={class:"modal fade my-auto",tabindex:"-1",id:"instockStatus",ref:"instock"},U={class:"modal-dialog modal-dialog-centered modal-lg"},D={class:"modal-content"},z={class:"modal-header"},I={class:"modal-title"},M=Object(a["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),q={class:"modal-body"},F={class:"table"},L=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",{class:"align-middle"},[Object(a["createVNode"])("th",{width:"30%",scope:"col"},"尺寸"),Object(a["createVNode"])("th",{width:"30%",scope:"col"},"數量"),Object(a["createVNode"])("th",{width:"15%",scope:"col"})])],-1),T={class:"text-center"},A=Object(a["createVNode"])("i",{class:"bi bi-trash-fill"},null,-1),E={class:"modal-footer border-0"},_=Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"}," Close ",-1);function J(e,t,c,o,r,l){return Object(a["openBlock"])(),Object(a["createBlock"])("div",B,[Object(a["createVNode"])("div",U,[Object(a["createVNode"])("div",D,[Object(a["createVNode"])("div",z,[Object(a["createVNode"])("h5",I,Object(a["toDisplayString"])(r.productObj.product.title)+" 尺寸 / 數量",1),M]),Object(a["createVNode"])("div",q,[Object(a["createVNode"])("table",F,[L,Object(a["createVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(r.productObj.size,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t,class:"align-middle"},[Object(a["createVNode"])("td",null,[Object(a["createVNode"])("span",T,Object(a["toDisplayString"])(r.productObj.size[t].num),1)]),Object(a["createVNode"])("td",null,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"number",class:"text-center",min:"1","onUpdate:modelValue":function(e){return r.productObj.size[t].qty=e}},null,8,["onUpdate:modelValue"]),[[a["vModelText"],r.productObj.size[t].qty,void 0,{trim:!0}]])]),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("button",{type:"button",class:"btn",onClick:function(e){return l.delSize(t)}},[A],8,["onClick"])])])})),128))])])]),Object(a["createVNode"])("div",E,[_,Object(a["createVNode"])("button",{onClick:t[1]||(t[1]=function(){return l.instockUpdate&&l.instockUpdate.apply(l,arguments)}),type:"button",class:"btn btn-primary"},"UpDate")])])])],512)}c("a434");var P=c("7c2b"),G=c.n(P),H={data:function(){return{modal:"",productObj:{product:{},size:[],id:"",qty:1}}},methods:{delSize:function(e){this.productObj.size.splice(e,1)},instockUpdate:function(){var e=this;this.$http.put("".concat("https://vue3-course-api.hexschool.io/","api/").concat("hua430","/cart/").concat(this.productObj.id),{data:this.productObj}).then((function(t){t.data.success&&(e.$swal("".concat(t.data.message)),e.$emit("cartCheckModal"),e.modal.hide())})).catch((function(e){console.log(e.data)}))}},mounted:function(){this.modal=new G.a(this.$refs.instock)}};H.render=J;var K=H,Q={components:{CartItemCheck:K},data:function(){return{cartTemp:{},carts:[],loadingStatus:{loadingItem:""},order:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{cartCheck:function(e){this.$refs.cartCheck.modal.show(),this.$refs.cartCheck.productObj=e},deleteItem:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("hua430","/cart");this.loadingStatus.loadingItem=e,this.$http.delete("".concat(c,"/").concat(e)).then((function(e){t.loadingStatus.loadingItem="",t.$swal(e.data.message),t.getCart()}))},deleteAll:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("hua430","/carts");this.$http.delete(t).then((function(t){e.$swal(t.data.message),e.getCart()}))},getCart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("hua430","/cart");this.$http.get(t).then((function(t){e.carts=t.data.data,e.carts.total=t.data.data.total.toLocaleString(),console.log(e.carts)})).catch((function(e){console.log(e.data)}))},onSubmit:function(){var e=this;this.$http.post("".concat("https://vue3-course-api.hexschool.io/","api/").concat("hua430","/order"),{data:this.order}).then((function(t){t.data.success?(e.$refs.form.resetForm(),e.getCart(),e.$swal(t.data.message)):e.$swal(t.data.message)}))},isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"}},created:function(){this.getCart()}};Q.render=$;t["default"]=Q},a434:function(e,t,c){"use strict";var a=c("23e7"),o=c("23cb"),r=c("a691"),l=c("50c4"),n=c("7b0b"),d=c("65f0"),s=c("8418"),i=c("1dde"),u=i("splice"),b=Math.max,m=Math.min,j=9007199254740991,O="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var c,a,i,u,h,p,V=n(this),f=l(V.length),N=o(e,f),g=arguments.length;if(0===g?c=a=0:1===g?(c=0,a=f-N):(c=g-2,a=m(b(r(t),0),f-N)),f+c-a>j)throw TypeError(O);for(i=d(V,a),u=0;u<a;u++)h=N+u,h in V&&s(i,u,V[h]);if(i.length=a,c<a){for(u=N;u<f-a;u++)h=u+a,p=u+c,h in V?V[p]=V[h]:delete V[p];for(u=f;u>f-a+c;u--)delete V[u-1]}else if(c>a)for(u=f-a;u>N;u--)h=u+a-1,p=u+c-1,h in V?V[p]=V[h]:delete V[p];for(u=0;u<c;u++)V[u+N]=arguments[u+2];return V.length=f-a+c,i}})},b0c0:function(e,t,c){var a=c("83ab"),o=c("9bf2").f,r=Function.prototype,l=r.toString,n=/^\s*function ([^ (]*)/,d="name";a&&!(d in r)&&o(r,d,{configurable:!0,get:function(){try{return l.call(this).match(n)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-e1d3e41c.62b0c90f.js.map